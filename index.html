<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OneStep – Jeden Tag ein kleiner Schritt</title>
    <meta id="meta-description" name="description" content="OneStep ist eine minimalistische Web‑App für nachhaltigen Fortschritt durch kleine tägliche Aufgaben." />
    <meta name="theme-color" content="#dce8e3" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="OneStep" />
    <link rel="icon" type="image/png" sizes="192x192" href="assets/onestep-logo-user.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/onestep-logo-user.png" />
    <link rel="manifest" href="site.webmanifest?v=1702" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div id="language-modal" class="language-modal" hidden>
      <div class="language-card">
        <h2 id="language-modal-title">Sprache wählen</h2>
        <p id="language-modal-text">Bitte wähle eine Sprache.</p>
        <div class="language-grid">
          <button class="btn" type="button" data-lang="de">Deutsch</button>
          <button class="btn" type="button" data-lang="en">English</button>
          <button class="btn" type="button" data-lang="ru">Русский</button>
          <button class="btn" type="button" data-lang="es">Español</button>
          <button class="btn" type="button" data-lang="fr">Français</button>
        </div>
      </div>
    </div>
    <div id="intro-modal" class="intro-modal" hidden>
      <div class="intro-card">
        <div class="intro-step" id="intro-step">1/3</div>
        <div class="intro-progress" aria-hidden="true">
          <span id="intro-progress-fill"></span>
        </div>
        <h2 id="intro-title">Willkommen bei OneStep</h2>
        <p id="intro-text"></p>
        <div id="intro-goal-field" class="intro-goal-field" hidden>
          <label id="intro-goal-label" for="intro-goal-input">Jahresvorsatz</label>
          <input id="intro-goal-input" type="text" maxlength="120" placeholder="z. B. fitter und energiegeladener werden" />
          <div id="intro-goal-hint" class="soft-note">Optional: Dein Hauptziel fuer dieses Jahr.</div>
        </div>
        <ul id="intro-examples" class="intro-examples" hidden></ul>
        <button id="intro-next" class="intro-next" type="button" aria-label="Nächste Seite">→</button>
      </div>
    </div>
    <header class="top">
      <div class="brand">
        <div class="logo">
          <img class="logo-mark" src="assets/onestep-logo-user.png" alt="OneStep Logo" />
          <span>OneStep</span>
        </div>
        <div class="tagline" id="tagline">Ein kleiner Schritt pro Tag ist besser als ein perfekter Plan.</div>
      </div>
    </header>

    <main class="layout app-shell">
      <section id="tutorial" class="panel tutorial" aria-live="polite">
        <div class="panel-head">
          <h2 id="tutorial-title">Start</h2>
          <span class="soft-note" id="tutorial-step">Schritt 1/3</span>
        </div>
        <p id="tutorial-text"></p>
        <ul id="tutorial-checklist" class="tutorial-checklist"></ul>
        <button id="tutorial-cta" type="button" class="btn ghost" hidden>Zum nächsten Schritt</button>
      </section>
      <!-- Welcome: shown only when no goals exist -->
      <section id="welcome" class="panel welcome" aria-live="polite" data-section="today">
        <h1>Willkommen bei OneStep</h1>
        <p>
          OneStep hilft dir, jeden Tag einen kleinen, realistischen Schritt zu gehen.
          Kein Druck, keine Schuldgefühle – nur stetiger, ruhiger Fortschritt.
        </p>
        <p>
          Starte mit einem einzigen Ziel. Daraus wird automatisch deine erste Tagesaufgabe erstellt.
        </p>
      </section>

      <!-- Today / Checklist -->
      <section class="panel" aria-labelledby="today-title" data-section="today">
        <div class="panel-head">
          <h2 id="today-title">Today</h2>
          <span class="soft-note" id="today-count">0 Aufgaben</span>
        </div>
        <form id="quick-task-form" class="quick-task" autocomplete="off">
          <label class="sr-only" for="quick-task-input">Einmalige Aufgabe</label>
          <input id="quick-task-input" type="text" placeholder="Einmalige Aufgabe (z. B. Einkaufen)" />
          <div class="quick-task-actions">
            <button id="quick-task-today" type="submit" class="btn">Hinzufügen</button>
            <button id="quick-task-tomorrow" type="button" class="btn ghost">Für morgen</button>
          </div>
        </form>
        <div id="unlock-controls" class="unlock" aria-live="polite"></div>
        <ul id="today-list" class="checklist" aria-live="polite"></ul>
        <form id="side-quest-form" class="side-quest-form" autocomplete="off">
          <label class="sr-only" for="side-quest-select">Side Quest auswählen</label>
          <select id="side-quest-select"></select>
          <button type="submit" class="btn ghost">Side Quest hinzufügen</button>
        </form>
      </section>

      <!-- Life Goals -->
      <section class="panel" aria-labelledby="goals-title" data-section="goals">
        <div class="panel-head">
          <h2 id="goals-title">Life Goals</h2>
          <span class="soft-note">Dein Aufgaben‑Pool</span>
        </div>
        <form id="goal-form" class="goal-form" autocomplete="off">
          <label class="sr-only" for="goal-input">Neues Ziel</label>
          <input id="goal-input" type="text" placeholder="z. B. 15 Minuten lesen" required />
          <label class="sr-only" for="goal-difficulty">Schwierigkeit</label>
          <select id="goal-difficulty" aria-label="Tageszeit">
            <option value="morning">Morgens</option>
            <option value="noon" selected>Mittags</option>
            <option value="evening">Abends</option>
          </select>
          <button type="submit" class="btn">Hinzufügen</button>
        </form>
        <ul id="goals-list" class="goals"></ul>
        <details class="info-block templates" id="templates-section" open>
          <summary id="templates-summary">Vorlagen (10 Kategorien)</summary>
          <div id="template-categories" class="template-grid"></div>
        </details>
        <div class="weekly-plan">
          <div class="panel-head">
            <h3 id="weekly-plan-title">Wochenplan</h3>
            <span class="soft-note" id="weekly-plan-note">Mindestens 4 Tage eintragen</span>
          </div>
          <div class="plan-controls">
            <label id="plan-goal-label" for="plan-goal">Ziel</label>
            <select id="plan-goal"></select>
          </div>
          <div id="plan-grid" class="plan-grid" aria-live="polite"></div>
          <div id="plan-hint" class="soft-note plan-hint"></div>
        </div>
      </section>

      <!-- Progress / Motivation -->
      <section class="panel" aria-labelledby="progress-title" data-section="progress">
        <div class="panel-head">
          <h2 id="progress-title">Progress</h2>
          <span class="soft-note">Ruhig. Klar. Nachhaltig.</span>
        </div>
        <div class="calendar">
          <div class="calendar-head">
            <button class="btn ghost" type="button" id="cal-prev">←</button>
            <div class="calendar-title" id="cal-title">Monat</div>
            <button class="btn ghost" type="button" id="cal-next">→</button>
          </div>
          <div class="calendar-grid" id="cal-grid" aria-label="Kalender"></div>
          <div class="calendar-legend">
            <span class="legend-box"></span>
            <span class="soft-note">Tag komplett erledigt</span>
          </div>
        </div>
        <div class="stats">
          <div class="stat">
            <div class="stat-value" id="streak">0</div>
            <div class="stat-label">Aktive Tage in Folge</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="total-done">0</div>
            <div class="stat-label">Erledigte Aufgaben gesamt</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="active-week">0</div>
            <div class="stat-label">Aktive Tage (Woche)</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="perfect-week">0</div>
            <div class="stat-label">Perfekte Tage (Woche)</div>
            <div class="stat-sub" id="perfect-record">Rekord: 0</div>
          </div>
        </div>
        <div class="progress-insights">
          <div class="identity-score-card">
            <div class="soft-note" id="identity-score-title">Identity Score</div>
            <div class="identity-score-value" id="identity-score-value">0/100</div>
            <div class="soft-note" id="identity-score-meta">Konsistenz der letzten 14 Tage</div>
          </div>
          <div class="annual-goal-card">
            <div class="soft-note" id="annual-goal-title">Jahresvorsatz</div>
            <div class="annual-goal-value" id="annual-goal-value">Noch nicht gesetzt</div>
            <div class="soft-note" id="annual-goal-meta"></div>
            <div class="soft-note" id="annual-goal-stats"></div>
          </div>
          <div class="soft-note" id="progress-week-rate">Wochenquote: 0%</div>
          <div class="soft-note" id="progress-month-rate">Monatsquote: 0%</div>
          <div class="soft-note" id="progress-best-day">Stärkster Wochentag: -</div>
        </div>
        <p id="motivation" class="motivation"></p>
      </section>

      <!-- Info -->
      <section class="panel" aria-labelledby="info-title" data-section="info">
        <div class="panel-head">
          <h2 id="info-title">Einstellungen</h2>
          <span class="soft-note" id="info-subtitle">App‑Optionen und Hinweise</span>
        </div>
        <details class="info-block">
          <summary id="info-summary-main">Info</summary>
          <p id="info-main-p1">
            Motivation schwankt – Disziplin ist verlässlicher. OneStep startet bewusst
            langsam: In den ersten drei Tagen gibt es nur eine einfache Aufgabe. Das
            bringt vielleicht noch keinen körperlichen Fortschritt, aber es baut die
            erste Gewohnheit auf.
          </p>
          <p id="info-main-p2">
            Es geht nicht darum, so schnell und so viel wie möglich zu trainieren.
            Entscheidend ist ein mentaler Schalter: Eine bestimmte Aufgabe wird
            automatisch und wiederholbar – genau dann entsteht nachhaltiger Fortschritt.
          </p>
        </details>
        <details class="info-block">
          <summary id="info-summary-list">So entsteht deine Tagesliste</summary>
          <ul class="info-list">
            <li id="info-list-1">Du legst Life Goals an – sie bilden deinen Aufgaben‑Pool.</li>
            <li id="info-list-2">Beim Start wird genau ein Ziel als Tagesaufgabe gewählt.</li>
            <li id="info-list-3">Alle 3 Tage kannst du eine weitere Aufgabe hinzufügen oder zufällig auswählen.</li>
            <li id="info-list-4">Erledigte Aufgaben bleiben sichtbar – damit du deinen Rhythmus erkennst.</li>
          </ul>
        </details>
        <details class="info-block">
          <summary id="info-summary-balance">Schwierigkeiten &amp; Balance</summary>
          <ul class="info-list">
            <li id="info-balance-1">Einfach: kleine, sichere Schritte für Kontinuität.</li>
            <li id="info-balance-2">Mittel: stabiler Fortschritt ohne Überforderung.</li>
            <li id="info-balance-3">Schwer: gezielte Herausforderung, wenn die Basis steht.</li>
          </ul>
        </details>
        <details class="info-block">
          <summary id="info-summary-privacy">Datenschutz</summary>
          <p id="info-privacy-p1">
            Alle Daten bleiben lokal in deinem Browser gespeichert. Es werden keine
            Konten, keine Cloud und keine Tracker verwendet.
          </p>
          <p><a href="privacy.html" target="_blank" rel="noopener noreferrer">Datenschutzseite öffnen</a></p>
          <p><a href="impressum.html" target="_blank" rel="noopener noreferrer">Impressum öffnen</a></p>
        </details>
        <div class="info-block">
          <h3 id="settings-version-title">Version</h3>
          <label class="switch-row" for="mode-switch">
            <span>Pro‑Version aktivieren</span>
            <input id="mode-switch" type="checkbox" />
          </label>
          <div class="soft-note" id="mode-hint">Testphase: Alle Funktionen sind in beiden Modi sichtbar.</div>
          <label class="switch-row" for="language-select">
            <span id="settings-language-label">Sprache</span>
            <select id="language-select" aria-label="Sprache wählen">
              <option value="de">Deutsch</option>
              <option value="en">English</option>
              <option value="ru">Русский</option>
              <option value="es">Español</option>
              <option value="fr">Français</option>
            </select>
          </label>
        </div>
        <div class="info-block">
          <h3 id="settings-system-title">System</h3>
          <div class="test-controls">
            <div class="test-title">Tagesanzahl simulieren</div>
            <div class="test-row">
              <label id="day-offset-label" for="day-offset">Tag‑Offset</label>
              <input id="day-offset" type="number" min="-30" max="30" step="1" value="0" />
              <button id="apply-offset" class="btn ghost" type="button">Anwenden</button>
            </div>
            <div class="soft-note" id="simulated-date">Heute: --</div>
          </div>
          <button id="check-updates" class="btn ghost" type="button">Auf Updates prüfen</button>
          <button id="reset-app" class="btn ghost" type="button">Reset</button>
        </div>
        <div class="info-block">
          <h3 id="backup-title">Backup</h3>
          <div class="backup-actions">
            <button id="export-data" class="btn ghost" type="button">Daten exportieren</button>
            <button id="import-data" class="btn ghost" type="button">Daten importieren</button>
          </div>
          <input id="import-file" type="file" accept="application/json" hidden />
        </div>
      </section>
    </main>

    <footer class="footer">
      <span>OneStep · Minimalistische Fortschritts‑App</span>
      <span class="soft-note">Lokal gespeichert in deinem Browser</span>
      <span class="soft-note" id="version">Version 1.7.2</span>
    </footer>

    <nav class="bottom-nav" aria-label="Bottom Navigation">
      <button class="nav-item active" type="button" data-target="today">
        <span class="nav-icon">✓</span>
        <span class="nav-label">Today</span>
      </button>
      <button class="nav-item" type="button" data-target="goals">
        <span class="nav-icon">◎</span>
        <span class="nav-label">Goals</span>
      </button>
      <button class="nav-item" type="button" data-target="progress">
        <span class="nav-icon">▦</span>
        <span class="nav-label">Progress</span>
      </button>
      <button class="nav-item" type="button" data-target="info">
        <span class="nav-icon">ℹ</span>
        <span class="nav-label">Einstellungen</span>
      </button>
    </nav>
    <div id="update-banner" class="update-banner" hidden>
      <div class="update-banner-content">
        <span id="update-banner-text">Neue Version verfügbar</span>
        <span id="update-banner-note" class="soft-note">Bugfixes und Verbesserungen sind bereit.</span>
      </div>
      <div class="update-banner-actions">
        <button id="update-banner-retry" type="button" class="btn ghost">Erneut prüfen</button>
        <button id="update-banner-btn" type="button" class="btn">Jetzt aktualisieren</button>
      </div>
    </div>
    <div id="day-detail-modal" class="day-detail-modal" hidden>
      <div class="day-detail-card">
        <div class="panel-head">
          <h3 id="day-detail-title">Tagesdetails</h3>
          <button id="day-detail-close" class="btn ghost" type="button">×</button>
        </div>
        <div class="soft-note" id="day-detail-date"></div>
        <ul id="day-detail-list" class="day-detail-list"></ul>
      </div>
    </div>
    <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

    <script src="js/app.js"></script>
  </body>
</html>
